(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[10],{512:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return S}));var r=o(0),c=o(1),a=o.n(c),m=o(2),l=o(34),n=o(27),i=o(8),s=o(12),d=o(538);const u=Object(n.applyFilters)("woocommerce_admin_customers_report_filters",[{label:Object(m.__)("Show","woocommerce-admin"),staticParams:["paged","per_page"],param:"filter",showFilters:()=>!0,filters:[{label:Object(m.__)("All Customers","woocommerce-admin"),value:"all"},{label:Object(m.__)("Single Customer","woocommerce-admin"),value:"select_customer",chartMode:"item-comparison",subFilters:[{component:"Search",value:"single_customer",chartMode:"item-comparison",path:["select_customer"],settings:{type:"customers",param:"customers",getLabels:d.c,labels:{placeholder:Object(m.__)("Type to search for a customer","woocommerce-admin"),button:Object(m.__)("Single Customer","woocommerce-admin")}}}]},{label:Object(m.__)("Advanced filters","woocommerce-admin"),value:"advanced"}]}]),b=Object(n.applyFilters)("woocommerce_admin_customers_report_advanced_filters",{title:Object(m._x)("Customers match {{select /}} filters","A sentence describing filters for Customers. See screen shot for context: https://cloudup.com/cCsm3GeXJbE","woocommerce-admin"),filters:{name:{labels:{add:Object(m.__)("Name","woocommerce-admin"),placeholder:Object(m.__)("Search","woocommerce-admin"),remove:Object(m.__)("Remove customer name filter","woocommerce-admin"),rule:Object(m.__)("Select a customer name filter match","woocommerce-admin"),title:Object(m.__)("{{title}}Name{{/title}} {{rule /}} {{filter /}}","woocommerce-admin"),filter:Object(m.__)("Select customer name","woocommerce-admin")},rules:[{value:"includes",label:Object(m._x)("Includes","customer names","woocommerce-admin")},{value:"excludes",label:Object(m._x)("Excludes","customer names","woocommerce-admin")}],input:{component:"Search",type:"customers",getLabels:Object(d.e)(s.NAMESPACE+"/customers",e=>({id:e.id,label:e.name}))}},country:{labels:{add:Object(m.__)("Country / Region","woocommerce-admin"),placeholder:Object(m.__)("Search","woocommerce-admin"),remove:Object(m.__)("Remove country / region filter","woocommerce-admin"),rule:Object(m.__)("Select a country / region filter match","woocommerce-admin"),title:Object(m.__)("{{title}}Country / Region{{/title}} {{rule /}} {{filter /}}","woocommerce-admin"),filter:Object(m.__)("Select country / region","woocommerce-admin")},rules:[{value:"includes",label:Object(m._x)("Includes","countries","woocommerce-admin")},{value:"excludes",label:Object(m._x)("Excludes","countries","woocommerce-admin")}],input:{component:"Search",type:"countries",getLabels:async e=>{const t=(await Object(i.resolveSelect)(s.COUNTRIES_STORE_NAME).getCountries()).map(e=>({key:e.code,label:Object(l.decodeEntities)(e.name)})),o=e.split(",");return await t.filter(e=>o.includes(e.key))}}},username:{labels:{add:Object(m.__)("Username","woocommerce-admin"),placeholder:Object(m.__)("Search customer username","woocommerce-admin"),remove:Object(m.__)("Remove customer username filter","woocommerce-admin"),rule:Object(m.__)("Select a customer username filter match","woocommerce-admin"),title:Object(m.__)("{{title}}Username{{/title}} {{rule /}} {{filter /}}","woocommerce-admin"),filter:Object(m.__)("Select customer username","woocommerce-admin")},rules:[{value:"includes",label:Object(m._x)("Includes","customer usernames","woocommerce-admin")},{value:"excludes",label:Object(m._x)("Excludes","customer usernames","woocommerce-admin")}],input:{component:"Search",type:"usernames",getLabels:d.c}},email:{labels:{add:Object(m.__)("Email","woocommerce-admin"),placeholder:Object(m.__)("Search customer email","woocommerce-admin"),remove:Object(m.__)("Remove customer email filter","woocommerce-admin"),rule:Object(m.__)("Select a customer email filter match","woocommerce-admin"),title:Object(m.__)("{{title}}Email{{/title}} {{rule /}} {{filter /}}","woocommerce-admin"),filter:Object(m.__)("Select customer email","woocommerce-admin")},rules:[{value:"includes",label:Object(m._x)("Includes","customer emails","woocommerce-admin")},{value:"excludes",label:Object(m._x)("Excludes","customer emails","woocommerce-admin")}],input:{component:"Search",type:"emails",getLabels:Object(d.e)(s.NAMESPACE+"/customers",e=>({id:e.id,label:e.email}))}},orders_count:{labels:{add:Object(m.__)("No. of Orders","woocommerce-admin"),remove:Object(m.__)("Remove order filter","woocommerce-admin"),rule:Object(m.__)("Select an order count filter match","woocommerce-admin"),title:Object(m.__)("{{title}}No. of Orders{{/title}} {{rule /}} {{filter /}}","woocommerce-admin")},rules:[{value:"max",label:Object(m._x)("Less Than","number of orders","woocommerce-admin")},{value:"min",label:Object(m._x)("More Than","number of orders","woocommerce-admin")},{value:"between",label:Object(m._x)("Between","number of orders","woocommerce-admin")}],input:{component:"Number"}},total_spend:{labels:{add:Object(m.__)("Total Spend","woocommerce-admin"),remove:Object(m.__)("Remove total spend filter","woocommerce-admin"),rule:Object(m.__)("Select a total spend filter match","woocommerce-admin"),title:Object(m.__)("{{title}}Total Spend{{/title}} {{rule /}} {{filter /}}","woocommerce-admin")},rules:[{value:"max",label:Object(m._x)("Less Than","total spend by customer","woocommerce-admin")},{value:"min",label:Object(m._x)("More Than","total spend by customer","woocommerce-admin")},{value:"between",label:Object(m._x)("Between","total spend by customer","woocommerce-admin")}],input:{component:"Currency"}},avg_order_value:{labels:{add:Object(m.__)("AOV","woocommerce-admin"),remove:Object(m.__)("Remove average order value filter","woocommerce-admin"),rule:Object(m.__)("Select an average order value filter match","woocommerce-admin"),title:Object(m.__)("{{title}}AOV{{/title}} {{rule /}} {{filter /}}","woocommerce-admin")},rules:[{value:"max",label:Object(m._x)("Less Than","average order value of customer","woocommerce-admin")},{value:"min",label:Object(m._x)("More Than","average order value of customer","woocommerce-admin")},{value:"between",label:Object(m._x)("Between","average order value of customer","woocommerce-admin")}],input:{component:"Currency"}},registered:{labels:{add:Object(m.__)("Registered","woocommerce-admin"),remove:Object(m.__)("Remove registered filter","woocommerce-admin"),rule:Object(m.__)("Select a registered filter match","woocommerce-admin"),title:Object(m.__)("{{title}}Registered{{/title}} {{rule /}} {{filter /}}","woocommerce-admin"),filter:Object(m.__)("Select registered date","woocommerce-admin")},rules:[{value:"before",label:Object(m._x)("Before","date","woocommerce-admin")},{value:"after",label:Object(m._x)("After","date","woocommerce-admin")},{value:"between",label:Object(m._x)("Between","date","woocommerce-admin")}],input:{component:"Date"}},last_active:{labels:{add:Object(m.__)("Last active","woocommerce-admin"),remove:Object(m.__)("Remove last active filter","woocommerce-admin"),rule:Object(m.__)("Select a last active filter match","woocommerce-admin"),title:Object(m.__)("{{title}}Last active{{/title}} {{rule /}} {{filter /}}","woocommerce-admin"),filter:Object(m.__)("Select registered date","woocommerce-admin")},rules:[{value:"before",label:Object(m._x)("Before","date","woocommerce-admin")},{value:"after",label:Object(m._x)("After","date","woocommerce-admin")},{value:"between",label:Object(m._x)("Between","date","woocommerce-admin")}],input:{component:"Date"}}}});var _=o(4),O=o(22),j=o(136),v=o(15),w=o(20),p=o(545),f=o(536),y=o(23);var g=function(e){let{isRequesting:t,query:o,filters:c,advancedFilters:a}=e;const l=Object(r.useContext)(f.a),{countries:n,loadingCountries:d}=Object(i.useSelect)(e=>{const{getCountries:t,hasFinishedResolution:o}=e(s.COUNTRIES_STORE_NAME);return{countries:t(),loadingCountries:!o("getCountries")}});return Object(r.createElement)(p.a,{endpoint:"customers",getHeadersContent:()=>[{label:Object(m.__)("Name","woocommerce-admin"),key:"name",required:!0,isLeftAligned:!0,isSortable:!0},{label:Object(m.__)("Username","woocommerce-admin"),key:"username",hiddenByDefault:!0},{label:Object(m.__)("Last active","woocommerce-admin"),key:"date_last_active",defaultSort:!0,isSortable:!0},{label:Object(m.__)("Date registered","woocommerce-admin"),key:"date_registered",isSortable:!0},{label:Object(m.__)("Email","woocommerce-admin"),key:"email"},{label:Object(m.__)("Orders","woocommerce-admin"),key:"orders_count",isSortable:!0,isNumeric:!0},{label:Object(m.__)("Total spend","woocommerce-admin"),key:"total_spend",isSortable:!0,isNumeric:!0},{label:Object(m.__)("AOV","woocommerce-admin"),screenReaderLabel:Object(m.__)("Average order value","woocommerce-admin"),key:"avg_order_value",isNumeric:!0},{label:Object(m.__)("Country / Region","woocommerce-admin"),key:"country",isSortable:!0},{label:Object(m.__)("City","woocommerce-admin"),key:"city",hiddenByDefault:!0,isSortable:!0},{label:Object(m.__)("Region","woocommerce-admin"),key:"state",hiddenByDefault:!0,isSortable:!0},{label:Object(m.__)("Postal code","woocommerce-admin"),key:"postcode",hiddenByDefault:!0,isSortable:!0}],getRowsContent:e=>{const t=Object(y.d)("dateFormat",w.defaultTableDateFormat),{formatAmount:o,formatDecimal:c,getCurrencyConfig:a}=l;return null==e?void 0:e.map(e=>{const{avg_order_value:m,date_last_active:l,date_registered:i,email:s,name:d,user_id:u,orders_count:b,username:w,total_spend:p,postcode:f,city:y,state:g,country:h}=e,S=void 0!==n[E=h]?n[E]:null;var E;const A=u?Object(r.createElement)(O.Link,{href:Object(v.getAdminLink)("user-edit.php?user_id="+u),type:"wp-admin"},d):d,x=l?Object(r.createElement)(O.Date,{date:l,visibleFormat:t}):"—",C=i?Object(r.createElement)(O.Date,{date:i,visibleFormat:t}):"—",R=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.Tooltip,{text:S},Object(r.createElement)("span",{"aria-hidden":"true"},h)),Object(r.createElement)("span",{className:"screen-reader-text"},S));return[{display:A,value:d},{display:w,value:w},{display:x,value:l},{display:C,value:i},{display:Object(r.createElement)("a",{href:"mailto:"+s},s),value:s},{display:Object(j.formatValue)(a(),"number",b),value:b},{display:o(p),value:c(p)},{display:o(m),value:c(m)},{display:R,value:h},{display:y,value:y},{display:g,value:g},{display:f,value:f}]})},getSummary:e=>{const{customers_count:t=0,avg_orders_count:o=0,avg_total_spend:r=0,avg_avg_order_value:c=0}=e,{formatAmount:a,getCurrencyConfig:n}=l,i=n();return[{label:Object(m._n)("customer","customers",t,"woocommerce-admin"),value:Object(j.formatValue)(i,"number",t)},{label:Object(m._n)("Average order","Average orders",o,"woocommerce-admin"),value:Object(j.formatValue)(i,"number",o)},{label:Object(m.__)("Average lifetime spend","woocommerce-admin"),value:a(r)},{label:Object(m.__)("Average order value","woocommerce-admin"),value:a(c)}]},summaryFields:["customers_count","avg_orders_count","avg_total_spend","avg_avg_order_value"],isRequesting:t||d,itemIdField:"id",query:o,labels:{placeholder:Object(m.__)("Search by customer name","woocommerce-admin")},searchBy:"customers",title:Object(m.__)("Customers","woocommerce-admin"),columnPrefsKey:"customers_report_columns",filters:c,advancedFilters:a})},h=o(544);class S extends r.Component{render(){const{isRequesting:e,query:t,path:o}=this.props,c={orderby:"date_last_active",order:"desc",...t};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(h.a,{query:t,path:o,filters:u,showDatePicker:!1,advancedFilters:b,report:"customers"}),Object(r.createElement)(g,{isRequesting:e,query:c,filters:u,advancedFilters:b}))}}S.propTypes={query:a.a.object.isRequired}},538:function(e,t,o){"use strict";o.d(t,"e",(function(){return d})),o.d(t,"a",(function(){return u})),o.d(t,"b",(function(){return b})),o.d(t,"c",(function(){return _})),o.d(t,"d",(function(){return O})),o.d(t,"f",(function(){return j})),o.d(t,"h",(function(){return v})),o.d(t,"g",(function(){return w}));var r=o(16),c=o(21),a=o.n(c),m=o(5),l=o(13),n=o(12),i=o(539),s=o(23);function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.identity;return function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1?arguments[1]:void 0;const m="function"==typeof e?e(c):e,n=Object(l.getIdsFromQuery)(o);if(n.length<1)return Promise.resolve([]);const i={include:n.join(","),per_page:n.length};return a()({path:Object(r.addQueryArgs)(m,i)}).then(e=>e.map(t))}}d(n.NAMESPACE+"/products/attributes",e=>({key:e.id,label:e.name}));const u=d(n.NAMESPACE+"/products/categories",e=>({key:e.id,label:e.name})),b=d(n.NAMESPACE+"/coupons",e=>({key:e.id,label:e.code})),_=d(n.NAMESPACE+"/customers",e=>({key:e.id,label:e.name})),O=d(n.NAMESPACE+"/products",e=>({key:e.id,label:e.name})),j=d(n.NAMESPACE+"/taxes",e=>({key:e.id,label:Object(i.a)(e)}));function v(e){let{attributes:t,name:o}=e;const r=Object(s.d)("variationTitleAttributesSeparator"," - ");if(o&&o.indexOf(r)>-1)return o;const c=(t||[]).map(e=>{let{option:t}=e;return t}).join(", ");return c?o+r+c:o}const w=d(e=>{let{products:t}=e;return t?n.NAMESPACE+`/products/${t}/variations`:n.NAMESPACE+"/variations"},e=>({key:e.id,label:v(e)}))},539:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var r=o(2);function c(e){return[e.country,e.state,e.name||Object(r.__)("TAX","woocommerce-admin"),e.priority].map(e=>e.toString().toUpperCase().trim()).filter(Boolean).join("-")}}}]);