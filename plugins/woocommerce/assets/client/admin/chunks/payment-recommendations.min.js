(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[46],{541:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(8);function o(e){const{createNotice:t}=Object(c.dispatch)("core/notices");e.error_data&&e.errors&&Object.keys(e.errors).length?Object.keys(e.errors).forEach(n=>{t("error",e.errors[n].join(" "))}):e.message&&t(e.code?"error":"success",e.message)}},547:function(e,t,n){"use strict";function c(e){return(e||"").split(":",1)[0]}function o(e){const t=c(e);return/^woocommerce(-|_)payments$/.test(t)?"wcpay":(""+t.replace(/-/g,"_")).split(":",1)[0]}function r(e){return e?e.substr(1).split("&").reduce((e,t)=>{const n=t.split("="),c=n[0];let o=decodeURIComponent(n[1]);return o=isNaN(Number(o))?o:Number(o),e[c]=o,e},{}):{}}function a(){let e="";const{page:t,path:n,post_type:c}=r(window.location.search);if(t){const c="wc-admin"===t?"home_screen":t;e=n?n.replace(/\//g,"_").substring(1):c}else c&&(e=c);return e}n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a}))},569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.size,n=void 0===t?24:t,c=e.onClick,i=(e.icon,e.className),s=function(e,t){if(null==e)return{};var n,c,o=function(e,t){if(null==e)return{};var n,c,o={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,r),m=["gridicon","gridicons-external",i,!!function(e){return 0==e%18}(n)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return o.default.createElement("svg",a({className:m,height:n,width:n,onClick:c},s,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),o.default.createElement("g",null,o.default.createElement("path",{d:"M19 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6v2H5v12h12v-6h2zM13 3v2h4.586l-7.793 7.793 1.414 1.414L19 6.414V11h2V3h-8z"})))};var c,o=(c=n(6))&&c.__esModule?c:{default:c},r=["size","onClick","icon","className"];function a(){return(a=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e}).apply(this,arguments)}},635:function(e,t,n){},657:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(2),r=n(8),a=n(34),i=n(4),s=n(22),m=n(19),l=n(12),d=n(17),u=n(569),p=n.n(u),_=(n(635),n(541)),g=n(547);const w=document.querySelector('[data-gateway_id="pre_install_woocommerce_payments_promotion"]');t.default=()=>{const[e,t]=Object(c.useState)(null),[n,u]=Object(c.useState)(!1),[y,b]=Object(c.useState)(!1),{installAndActivatePlugins:O,dismissRecommendedPlugins:f}=Object(r.useDispatch)(l.PLUGINS_STORE_NAME),{createNotice:j}=Object(r.useDispatch)("core/notices"),{installedPaymentGateway:h,installedPaymentGateways:E,paymentGatewaySuggestions:v,isResolving:N}=Object(r.useSelect)(t=>{const n=y&&Object(g.a)(e);return{installedPaymentGateway:n&&t(l.PAYMENT_GATEWAYS_STORE_NAME).getPaymentGateway(n),installedPaymentGateways:t(l.PAYMENT_GATEWAYS_STORE_NAME).getPaymentGateways().reduce((e,t)=>(n===t.id||(e[t.id]=!0),e),{}),isResolving:t(l.ONBOARDING_STORE_NAME).isResolving("getPaymentGatewaySuggestions"),paymentGatewaySuggestions:t(l.ONBOARDING_STORE_NAME).getPaymentGatewaySuggestions()}},[y]),S=Object(c.useRef)(!1),A=v&&v.length>0&&!n;if(Object(c.useEffect)(()=>{if((A||w&&!N)&&!S.current){S.current=!0;const e=(v||[]).reduce((e,t)=>t.plugins&&t.plugins.length>0?{...e,[t.plugins[0].replace(/\-/g,"_")+"_displayed"]:!0}:e,{woocommerce_payments_displayed:!!w});Object(d.recordEvent)("settings_payments_recommendations_pageview",e)}},[A,w,N]),Object(c.useEffect)(()=>{h&&(window.location.href=h.settings_url)},[h]),!A)return null;const P=async()=>{u(!0),Object(d.recordEvent)("settings_payments_recommendations_dismiss",{});await f("payments")||(u(!1),j("error",Object(o.__)('There was a problem hiding the "Additional ways to get paid" card.',"woocommerce-admin")))},G=(v||[]).filter(e=>{var t;return!E[e.id]&&(null===(t=e.plugins)||void 0===t?void 0:t.length)&&(!window.wcAdminFeatures["wc-pay-promotion"]||!e.id.startsWith("woocommerce_payments"))}).map(n=>({key:n.id,title:Object(c.createElement)(c.Fragment,null,n.title,n.recommended&&Object(c.createElement)(s.Pill,null,Object(o.__)("Recommended","woocommerce-admin"))),content:Object(a.decodeEntities)(n.content),after:Object(c.createElement)(i.Button,{isSecondary:!0,onClick:()=>(n=>{e||(t(n.id),Object(d.recordEvent)("settings_payments_recommendations_setup",{extension_selected:n.plugins[0]}),O([n.plugins[0]]).then(()=>{b(!0)}).catch(e=>{Object(_.a)(e),t(null)}))})(n),isBusy:e===n.id,disabled:!!e},n.actionText||Object(o.__)("Get started","woocommerce-admin")),before:Object(c.createElement)("img",{src:n.square_image||n.image,alt:""})}));return Object(c.createElement)(i.Card,{size:"medium",className:"woocommerce-recommended-payments-card"},Object(c.createElement)(i.CardHeader,null,Object(c.createElement)("div",{className:"woocommerce-recommended-payments-card__header"},Object(c.createElement)(m.Text,{variant:"title.small",as:"p",size:"20",lineHeight:"28px"},Object(o.__)("Additional ways to get paid","woocommerce-admin")),Object(c.createElement)(m.Text,{className:"woocommerce-recommended-payments__header-heading",variant:"caption",as:"p",size:"12",lineHeight:"16px"},Object(o.__)('We recommend adding one of the following payment extensions to your store. The extension will be installed and activated for you when you click "Get started".',"woocommerce-admin"))),Object(c.createElement)("div",{className:"woocommerce-card__menu woocommerce-card__header-item"},Object(c.createElement)(s.EllipsisMenu,{label:Object(o.__)("Task List Options","woocommerce-admin"),renderContent:()=>Object(c.createElement)("div",{className:"woocommerce-review-activity-card__section-controls"},Object(c.createElement)(i.Button,{onClick:P},Object(o.__)("Hide this","woocommerce-admin")))}))),Object(c.createElement)(s.List,{items:G}),Object(c.createElement)(i.CardFooter,null,Object(c.createElement)(i.Button,{href:"https://woocommerce.com/product-category/woocommerce-extensions/payment-gateways/?utm_source=payments_recommendations",target:"_blank",isTertiary:!0},Object(o.__)("See more options","woocommerce-admin"),Object(c.createElement)(p.a,{size:18}))))}}}]);