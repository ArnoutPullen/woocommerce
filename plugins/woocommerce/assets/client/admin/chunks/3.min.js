(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[3],{538:function(e,t,r){"use strict";r.d(t,"e",(function(){return m})),r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return g})),r.d(t,"f",(function(){return y})),r.d(t,"h",(function(){return h})),r.d(t,"g",(function(){return f}));var a=r(16),n=r(21),o=r.n(n),s=r(5),i=r(13),c=r(12),l=r(539),u=r(23);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.identity;return function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;const s="function"==typeof e?e(n):e,c=Object(i.getIdsFromQuery)(r);if(c.length<1)return Promise.resolve([]);const l={include:c.join(","),per_page:c.length};return o()({path:Object(a.addQueryArgs)(s,l)}).then(e=>e.map(t))}}m(c.NAMESPACE+"/products/attributes",e=>({key:e.id,label:e.name}));const d=m(c.NAMESPACE+"/products/categories",e=>({key:e.id,label:e.name})),p=m(c.NAMESPACE+"/coupons",e=>({key:e.id,label:e.code})),b=m(c.NAMESPACE+"/customers",e=>({key:e.id,label:e.name})),g=m(c.NAMESPACE+"/products",e=>({key:e.id,label:e.name})),y=m(c.NAMESPACE+"/taxes",e=>({key:e.id,label:Object(l.a)(e)}));function h(e){let{attributes:t,name:r}=e;const a=Object(u.d)("variationTitleAttributesSeparator"," - ");if(r&&r.indexOf(a)>-1)return r;const n=(t||[]).map(e=>{let{option:t}=e;return t}).join(", ");return n?r+a+n:r}const f=m(e=>{let{products:t}=e;return t?c.NAMESPACE+`/products/${t}/variations`:c.NAMESPACE+"/variations"},e=>({key:e.id,label:h(e)}))},539:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(2);function n(e){return[e.country,e.state,e.name||Object(a.__)("TAX","woocommerce-admin"),e.priority].map(e=>e.toString().toUpperCase().trim()).filter(Boolean).join("-")}},540:function(e,t,r){"use strict";var a=r(0),n=r(2),o=r(14),s=r(68),i=r(8),c=r(5),l=r(1),u=r.n(l),m=r(22),d=r(12),p=r(20),b=r(536),g=r(537),y=r(13);function h(e){return t=>Object(s.format)(e,t)}class f extends a.Component{shouldComponentUpdate(e){return e.isRequesting!==this.props.isRequesting||e.primaryData.isRequesting!==this.props.primaryData.isRequesting||e.secondaryData.isRequesting!==this.props.secondaryData.isRequesting||!Object(c.isEqual)(e.query,this.props.query)}getItemChartData(){const{primaryData:e,selectedChart:t}=this.props;return e.data.intervals.map((function(e){const r={};return e.subtotals.segments.forEach((function(e){if(e.segment_label){const a=r[e.segment_label]?e.segment_label+" (#"+e.segment_id+")":e.segment_label;r[e.segment_id]={label:a,value:e.subtotals[t.key]||0}}})),{date:Object(s.format)("Y-m-d\\TH:i:s",e.date_start),...r}}))}getTimeChartData(){const{query:e,primaryData:t,secondaryData:r,selectedChart:a,defaultDateRange:n}=this.props,o=Object(p.getIntervalForQuery)(e,n),{primary:i,secondary:c}=Object(p.getCurrentDates)(e,n);return t.data.intervals.map((function(t,n){const l=Object(p.getPreviousDate)(t.date_start,i.after,c.after,e.compare,o),u=r.data.intervals[n];return{date:Object(s.format)("Y-m-d\\TH:i:s",t.date_start),primary:{label:`${i.label} (${i.range})`,labelDate:t.date_start,value:t.subtotals[a.key]||0},secondary:{label:`${c.label} (${c.range})`,labelDate:l.format("YYYY-MM-DD HH:mm:ss"),value:u&&u.subtotals[a.key]||0}}}))}getTimeChartTotals(){const{primaryData:e,secondaryData:t,selectedChart:r}=this.props;return{primary:Object(c.get)(e,["data","totals",r.key],null),secondary:Object(c.get)(t,["data","totals",r.key],null)}}renderChart(e,t,r,o){const{emptySearchResults:s,filterParam:i,interactiveLegend:c,itemsLabel:l,legendPosition:u,path:b,query:g,selectedChart:y,showHeaderControls:f,primaryData:_,defaultDateRange:O}=this.props,j=Object(p.getIntervalForQuery)(g,O),v=Object(p.getAllowedIntervalsForQuery)(g,O),C=Object(p.getDateFormatsForInterval)(j,_.data.intervals.length,{type:"php"}),w=s?Object(n.__)("No data for the current search","woocommerce-admin"):Object(n.__)("No data for the selected date range","woocommerce-admin"),{formatAmount:R,getCurrencyConfig:q}=this.context;return Object(a.createElement)(m.Chart,{allowedIntervals:v,data:r,dateParser:"%Y-%m-%dT%H:%M:%S",emptyMessage:w,filterParam:i,interactiveLegend:c,interval:j,isRequesting:t,itemsLabel:l,legendPosition:u,legendTotals:o,mode:e,path:b,query:g,screenReaderFormat:h(C.screenReaderFormat),showHeaderControls:f,title:y.label,tooltipLabelFormat:h(C.tooltipLabelFormat),tooltipTitle:"time-comparison"===e&&y.label||null,tooltipValueFormat:Object(d.getTooltipValueFormat)(y.type,R),chartType:Object(p.getChartTypeForQuery)(g),valueType:y.type,xFormat:h(C.xFormat),x2Format:h(C.x2Format),currency:q()})}renderItemComparison(){const{isRequesting:e,primaryData:t}=this.props;if(t.isError)return Object(a.createElement)(g.a,null);const r=e||t.isRequesting,n=this.getItemChartData();return this.renderChart("item-comparison",r,n)}renderTimeComparison(){const{isRequesting:e,primaryData:t,secondaryData:r}=this.props;if(!t||t.isError||r.isError)return Object(a.createElement)(g.a,null);const n=e||t.isRequesting||r.isRequesting,o=this.getTimeChartData(),s=this.getTimeChartTotals();return this.renderChart("time-comparison",n,o,s)}render(){const{mode:e}=this.props;return"item-comparison"===e?this.renderItemComparison():this.renderTimeComparison()}}f.contextType=b.a,f.propTypes={filters:u.a.array,isRequesting:u.a.bool,itemsLabel:u.a.string,limitProperties:u.a.array,mode:u.a.string,path:u.a.string.isRequired,primaryData:u.a.object,query:u.a.object.isRequired,secondaryData:u.a.object,selectedChart:u.a.shape({key:u.a.string.isRequired,label:u.a.string.isRequired,order:u.a.oneOf(["asc","desc"]),orderby:u.a.string,type:u.a.oneOf(["average","number","currency"]).isRequired}).isRequired},f.defaultProps={isRequesting:!1,primaryData:{data:{intervals:[]},isError:!1,isRequesting:!1},secondaryData:{data:{intervals:[]},isError:!1,isRequesting:!1}};t.a=Object(o.compose)(Object(i.withSelect)((e,t)=>{const{charts:r,endpoint:a,filters:n,isRequesting:o,limitProperties:s,query:i,advancedFilters:l}=t,u=s||[a],m=function e(t,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||0===t.length)return null;const n=t.slice(0),o=n.pop();if(o.showFilters(r,a)){const e=Object(y.flattenFilters)(o.filters),t=r[o.param]||o.defaultValue||"all";return Object(c.find)(e,{value:t})}return e(n,r,a)}(n,i),p=Object(c.get)(m,["settings","param"]),b=t.mode||function(e,t){if(e&&t){const r=Object(c.get)(e,["settings","param"]);if(!r||Object.keys(t).includes(r))return Object(c.get)(e,["chartMode"])}return null}(m,i)||"time-comparison",{woocommerce_default_date_range:g}=e(d.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings"),h=e(d.REPORTS_STORE_NAME),f={mode:b,filterParam:p,defaultDateRange:g};if(o)return f;const _=u.some(e=>i[e]&&i[e].length);if(i.search&&!_)return{...f,emptySearchResults:!0};const O=r&&r.map(e=>e.key),j=Object(d.getReportChartData)({endpoint:a,dataType:"primary",query:i,selector:h,limitBy:u,filters:n,advancedFilters:l,defaultDateRange:g,fields:O});if("item-comparison"===b)return{...f,primaryData:j};const v=Object(d.getReportChartData)({endpoint:a,dataType:"secondary",query:i,selector:h,limitBy:u,filters:n,advancedFilters:l,defaultDateRange:g,fields:O});return{...f,primaryData:j,secondaryData:v}}))(f)},542:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(5);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=Object(a.find)(t,{key:e});return r||t[0]}},543:function(e,t,r){"use strict";var a=r(0),n=r(2),o=r(14),s=r(8),i=r(1),c=r.n(i),l=r(13),u=r(22),m=r(136),d=r(12),p=r(20),b=r(17),g=r(537),y=r(536);class h extends a.Component{formatVal(e,t){const{formatAmount:r,getCurrencyConfig:a}=this.context;return"currency"===t?r(e):Object(m.formatValue)(a(),t,e)}getValues(e,t){const{emptySearchResults:r,summaryData:a}=this.props,{totals:n}=a,o=n.primary?n.primary[e]:0,s=n.secondary?n.secondary[e]:0,i=r?0:o,c=r?0:s;return{delta:Object(m.calculateDelta)(i,c),prevValue:this.formatVal(c,t),value:this.formatVal(i,t)}}render(){const{charts:e,query:t,selectedChart:r,summaryData:o,endpoint:s,report:i,defaultDateRange:c}=this.props,{isError:m,isRequesting:d}=o;if(m)return Object(a.createElement)(g.a,null);if(d)return Object(a.createElement)(u.SummaryListPlaceholder,{numberOfItems:e.length});const{compare:y}=Object(p.getDateParamsFromQuery)(t,c);return Object(a.createElement)(u.SummaryList,null,t=>{let{onToggle:o}=t;return e.map(e=>{const{key:t,order:c,orderby:m,label:d,type:p,isReverseTrend:g,labelTooltipText:h}=e,f={chart:t};m&&(f.orderby=m),c&&(f.order=c);const _=Object(l.getNewPath)(f),O=r.key===t,{delta:j,prevValue:v,value:C}=this.getValues(t,p);return Object(a.createElement)(u.SummaryNumber,{key:t,delta:j,href:_,label:d,reverseTrend:g,prevLabel:"previous_period"===y?Object(n.__)("Previous period:","woocommerce-admin"):Object(n.__)("Previous year:","woocommerce-admin"),prevValue:v,selected:O,value:C,labelTooltipText:h,onLinkClickCallback:()=>{o&&o(),Object(b.recordEvent)("analytics_chart_tab_click",{report:i||s,key:t})}})})})}}h.propTypes={charts:c.a.array.isRequired,endpoint:c.a.string.isRequired,limitProperties:c.a.array,query:c.a.object.isRequired,selectedChart:c.a.shape({key:c.a.string.isRequired,label:c.a.string.isRequired,order:c.a.oneOf(["asc","desc"]),orderby:c.a.string,type:c.a.oneOf(["average","number","currency"]).isRequired}).isRequired,summaryData:c.a.object,report:c.a.string},h.defaultProps={summaryData:{totals:{primary:{},secondary:{}},isError:!1}},h.contextType=y.a,t.a=Object(o.compose)(Object(s.withSelect)((e,t)=>{const{charts:r,endpoint:a,limitProperties:n,query:o,filters:s,advancedFilters:i}=t,c=n||[a],l=c.some(e=>o[e]&&o[e].length);if(o.search&&!l)return{emptySearchResults:!0};const u=r&&r.map(e=>e.key),{woocommerce_default_date_range:m}=e(d.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings");return{summaryData:Object(d.getSummaryNumbers)({endpoint:a,query:o,select:e,limitBy:c,filters:s,advancedFilters:i,defaultDateRange:m,fields:u}),defaultDateRange:m}}))(h)},554:function(e,t,r){"use strict";function a(e,t,r){return!!t&&(e&&t<=r==="instock")}r.d(t,"a",(function(){return a}))},570:function(e,t,r){"use strict";var a=r(0),n=r(2),o=r(14),s=r(34),i=r(8),c=r(5),l=r(13),u=r(22),m=r(136),d=r(15),p=r(12),b=r(571),g=r(554),y=r(545),h=r(536),f=r(23);r(633);const _=Object(f.d)("manageStock","no"),O=Object(f.d)("stockStatuses",{});class j extends a.Component{constructor(){super(),this.getHeadersContent=this.getHeadersContent.bind(this),this.getRowsContent=this.getRowsContent.bind(this),this.getSummary=this.getSummary.bind(this)}getHeadersContent(){return[{label:Object(n.__)("Product title","woocommerce-admin"),key:"product_name",required:!0,isLeftAligned:!0,isSortable:!0},{label:Object(n.__)("SKU","woocommerce-admin"),key:"sku",hiddenByDefault:!0,isSortable:!0},{label:Object(n.__)("Items sold","woocommerce-admin"),key:"items_sold",required:!0,defaultSort:!0,isSortable:!0,isNumeric:!0},{label:Object(n.__)("Net sales","woocommerce-admin"),screenReaderLabel:Object(n.__)("Net sales","woocommerce-admin"),key:"net_revenue",required:!0,isSortable:!0,isNumeric:!0},{label:Object(n.__)("Orders","woocommerce-admin"),key:"orders_count",isSortable:!0,isNumeric:!0},{label:Object(n.__)("Category","woocommerce-admin"),key:"product_cat"},{label:Object(n.__)("Variations","woocommerce-admin"),key:"variations",isSortable:!0},"yes"===_?{label:Object(n.__)("Status","woocommerce-admin"),key:"stock_status"}:null,"yes"===_?{label:Object(n.__)("Stock","woocommerce-admin"),key:"stock",isNumeric:!0}:null].filter(Boolean)}getRowsContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{query:t}=this.props,r=Object(l.getPersistedQuery)(t),{render:o,formatDecimal:i,getCurrencyConfig:p}=this.context,y=p();return Object(c.map)(e,e=>{const{product_id:c,items_sold:p,net_revenue:h,orders_count:f}=e,j=e.extended_info||{},{category_ids:v,low_stock_amount:C,manage_stock:w,sku:R,stock_status:q,stock_quantity:E,variations:S=[]}=j,k=Object(s.decodeEntities)(j.name),D=Object(l.getNewPath)(r,"/analytics/orders",{filter:"advanced",product_includes:c}),T=Object(l.getNewPath)(r,"/analytics/products",{filter:"single_product",products:c}),{categories:A}=this.props,P=v&&A&&v.map(e=>A.get(e)).filter(Boolean)||[],N=Object(g.a)(q,E,C)?Object(a.createElement)(u.Link,{href:Object(d.getAdminLink)("post.php?action=edit&post="+c),type:"wp-admin"},Object(n._x)("Low","Indication of a low quantity","woocommerce-admin")):O[q];return[{display:Object(a.createElement)(u.Link,{href:T,type:"wc-admin"},k),value:k},{display:R,value:R},{display:Object(m.formatValue)(y,"number",p),value:p},{display:o(h),value:i(h)},{display:Object(a.createElement)(u.Link,{href:D,type:"wc-admin"},f),value:f},{display:Object(a.createElement)("div",{className:"woocommerce-table__product-categories"},P[0]&&Object(a.createElement)(b.a,{category:P[0],categories:A}),P.length>1&&Object(a.createElement)(u.Tag,{label:Object(n.sprintf)(Object(n._x)("+%d more","categories","woocommerce-admin"),P.length-1),popoverContents:P.map(e=>Object(a.createElement)(b.a,{category:e,categories:A,key:e.id,query:t}))})),value:P.map(e=>e.name).join(", ")},{display:Object(m.formatValue)(y,"number",S.length),value:S.length},"yes"===_?{display:w?N:Object(n.__)("N/A","woocommerce-admin"),value:w?O[q]:null}:null,"yes"===_?{display:w?Object(m.formatValue)(y,"number",E):Object(n.__)("N/A","woocommerce-admin"),value:E}:null].filter(Boolean)})}getSummary(e){const{products_count:t=0,items_sold:r=0,net_revenue:a=0,orders_count:o=0}=e,{formatAmount:s,getCurrencyConfig:i}=this.context,c=i();return[{label:Object(n._n)("Product","Products",t,"woocommerce-admin"),value:Object(m.formatValue)(c,"number",t)},{label:Object(n._n)("Item sold","Items sold",r,"woocommerce-admin"),value:Object(m.formatValue)(c,"number",r)},{label:Object(n.__)("Net sales","woocommerce-admin"),value:s(a)},{label:Object(n._n)("Orders","Orders",o,"woocommerce-admin"),value:Object(m.formatValue)(c,"number",o)}]}render(){const{advancedFilters:e,baseSearchQuery:t,filters:r,hideCompare:o,isRequesting:s,query:i}=this.props,c={helpText:Object(n.__)("Check at least two products below to compare","woocommerce-admin"),placeholder:Object(n.__)("Search by product name or SKU","woocommerce-admin")};return Object(a.createElement)(y.a,{compareBy:o?void 0:"products",endpoint:"products",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:["products_count","items_sold","net_revenue","orders_count"],itemIdField:"product_id",isRequesting:s,labels:c,query:i,searchBy:"products",baseSearchQuery:t,tableQuery:{orderby:i.orderby||"items_sold",order:i.order||"desc",extended_info:!0,segmentby:i.segmentby},title:Object(n.__)("Products","woocommerce-admin"),columnPrefsKey:"products_report_columns",filters:r,advancedFilters:e})}}j.contextType=h.a,t.a=Object(o.compose)(Object(i.withSelect)((e,t)=>{const{query:r,isRequesting:a}=t,{getItems:n,getItemsError:o,isResolving:s}=e(p.ITEMS_STORE_NAME);if(a||r.search&&(!r.products||!r.products.length))return{};const i={per_page:-1};return{categories:n("categories",i),isError:Boolean(o("categories",i)),isRequesting:s("getItems",["categories",i])}}))(j)},571:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(0),n=r(5),o=r(4),s=r(22),i=r(13);class c extends a.Component{getCategoryAncestorIds(e,t){const r=[];let a=e.parent;for(;a;)r.unshift(a),a=t.get(a).parent;return r}getCategoryAncestors(e,t){const r=this.getCategoryAncestorIds(e,t);if(r.length)return 1===r.length?t.get(Object(n.first)(r)).name+" › ":2===r.length?t.get(Object(n.first)(r)).name+" › "+t.get(Object(n.last)(r)).name+" › ":t.get(Object(n.first)(r)).name+" … "+t.get(Object(n.last)(r)).name+" › "}render(){const{categories:e,category:t,query:r}=this.props,n=Object(i.getPersistedQuery)(r);return t?Object(a.createElement)("div",{className:"woocommerce-table__breadcrumbs"},this.getCategoryAncestors(t,e),Object(a.createElement)(s.Link,{href:Object(i.getNewPath)(n,"/analytics/categories",{filter:"single_category",categories:t.id}),type:"wc-admin"},t.name)):Object(a.createElement)(o.Spinner,null)}}},633:function(e,t,r){}}]);