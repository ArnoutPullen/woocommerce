(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[14],{514:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return F}));var a=r(0),s=r(1),o=r.n(s),n=r(562),i=r(542),c=r(540),l=r(543),m=r(2),d=r(68),u=r(8),p=r(14),b=r(5),y=r(22),g=r(136),_=r(12),h=r(20),f=r(31),O=r(545),j=r(23),v=r(536);const R=[],w=["orders_count","gross_sales","total_sales","refunds","coupons","taxes","shipping","net_revenue"];class q extends a.Component{constructor(){super(),this.getHeadersContent=this.getHeadersContent.bind(this),this.getRowsContent=this.getRowsContent.bind(this),this.getSummary=this.getSummary.bind(this)}getHeadersContent(){return[{label:Object(m.__)("Date","woocommerce-admin"),key:"date",required:!0,defaultSort:!0,isLeftAligned:!0,isSortable:!0},{label:Object(m.__)("Orders","woocommerce-admin"),key:"orders_count",required:!1,isSortable:!0,isNumeric:!0},{label:Object(m.__)("Gross sales","woocommerce-admin"),key:"gross_sales",required:!1,isSortable:!0,isNumeric:!0},{label:Object(m.__)("Returns","woocommerce-admin"),key:"refunds",required:!1,isSortable:!0,isNumeric:!0},{label:Object(m.__)("Coupons","woocommerce-admin"),key:"coupons",required:!1,isSortable:!0,isNumeric:!0},{label:Object(m.__)("Net sales","woocommerce-admin"),key:"net_revenue",required:!1,isSortable:!0,isNumeric:!0},{label:Object(m.__)("Taxes","woocommerce-admin"),key:"taxes",required:!1,isSortable:!0,isNumeric:!0},{label:Object(m.__)("Shipping","woocommerce-admin"),key:"shipping",required:!1,isSortable:!0,isNumeric:!0},{label:Object(m.__)("Total sales","woocommerce-admin"),key:"total_sales",required:!1,isSortable:!0,isNumeric:!0}]}getRowsContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=Object(j.d)("dateFormat",h.defaultTableDateFormat),{formatAmount:r,render:s,formatDecimal:o,getCurrencyConfig:n}=this.context;return e.map(e=>{const{coupons:i,gross_sales:c,total_sales:l,net_revenue:m,orders_count:u,refunds:p,shipping:b,taxes:_}=e.subtotals,h=Object(a.createElement)(y.Link,{href:"edit.php?post_type=shop_order&m="+Object(d.format)("Ymd",e.date_start),type:"wp-admin"},Object(g.formatValue)(n(),"number",u));return[{display:Object(a.createElement)(y.Date,{date:e.date_start,visibleFormat:t}),value:e.date_start},{display:h,value:Number(u)},{display:s(c),value:o(c)},{display:r(p),value:o(p)},{display:r(i),value:o(i)},{display:s(m),value:o(m)},{display:s(_),value:o(_)},{display:s(b),value:o(b)},{display:s(l),value:o(l)}]})}getSummary(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{orders_count:r=0,gross_sales:a=0,total_sales:s=0,refunds:o=0,coupons:n=0,taxes:i=0,shipping:c=0,net_revenue:l=0}=e,{formatAmount:d,getCurrencyConfig:u}=this.context,p=u();return[{label:Object(m._n)("day","days",t,"woocommerce-admin"),value:Object(g.formatValue)(p,"number",t)},{label:Object(m._n)("order","orders",r,"woocommerce-admin"),value:Object(g.formatValue)(p,"number",r)},{label:Object(m.__)("Gross sales","woocommerce-admin"),value:d(a)},{label:Object(m.__)("Returns","woocommerce-admin"),value:d(o)},{label:Object(m.__)("Coupons","woocommerce-admin"),value:d(n)},{label:Object(m.__)("Net sales","woocommerce-admin"),value:d(l)},{label:Object(m.__)("Taxes","woocommerce-admin"),value:d(i)},{label:Object(m.__)("Shipping","woocommerce-admin"),value:d(c)},{label:Object(m.__)("Total sales","woocommerce-admin"),value:d(s)}]}render(){const{advancedFilters:e,filters:t,tableData:r,query:s}=this.props;return Object(a.createElement)(O.a,{endpoint:"revenue",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:w,query:s,tableData:r,title:Object(m.__)("Revenue","woocommerce-admin"),columnPrefsKey:"revenue_report_columns",filters:t,advancedFilters:e})}}q.contextType=v.a;const T=Object(b.memoize)((e,t,r,a)=>({tableData:{items:{data:Object(b.get)(a,["data","intervals"],R),totalResults:Object(b.get)(a,["totalResults"],0)},isError:e,isRequesting:t,query:r}}),(e,t,r,a)=>[e,t,Object(f.stringify)(r),Object(b.get)(a,["totalResults"],0),Object(b.get)(a,["data","intervals"],R).length].join(":")),C=Object(b.memoize)((e,t,r,a,s)=>({interval:"day",orderby:t,order:e,page:r,per_page:a,after:Object(h.appendTimestamp)(s.primary.after,"start"),before:Object(h.appendTimestamp)(s.primary.before,"end")}),(e,t,r,a,s)=>[e,t,r,a,s.primary.after,s.primary.before].join(":"));var D=Object(p.compose)(Object(u.withSelect)((e,t)=>{const{query:r,filters:a,advancedFilters:s}=t,{woocommerce_default_date_range:o}=e(_.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings"),n=Object(h.getCurrentDates)(r,o),{getReportStats:i,getReportStatsError:c,isResolving:l}=e(_.REPORTS_STORE_NAME),m=C(r.order||"desc",r.orderby||"date",r.paged||1,r.per_page||_.QUERY_DEFAULTS.pageSize,n),d=Object(_.getReportTableQuery)({endpoint:"revenue",query:r,select:e,tableQuery:m,filters:a,advancedFilters:s}),u=i("revenue",d),p=Boolean(c("revenue",d)),b=l("getReportStats",["revenue",d]);return T(p,b,m,u)}))(q),S=r(544);class F extends a.Component{render(){const{path:e,query:t}=this.props;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(S.a,{query:t,path:e,report:"revenue",filters:n.c,advancedFilters:n.a}),Object(a.createElement)(l.a,{charts:n.b,endpoint:"revenue",query:t,selectedChart:Object(i.a)(t.chart,n.b),filters:n.c,advancedFilters:n.a}),Object(a.createElement)(c.a,{charts:n.b,endpoint:"revenue",path:e,query:t,selectedChart:Object(i.a)(t.chart,n.b),filters:n.c,advancedFilters:n.a}),Object(a.createElement)(D,{query:t,filters:n.c,advancedFilters:n.a}))}}F.propTypes={path:o.a.string.isRequired,query:o.a.object.isRequired}},540:function(e,t,r){"use strict";var a=r(0),s=r(2),o=r(14),n=r(68),i=r(8),c=r(5),l=r(1),m=r.n(l),d=r(22),u=r(12),p=r(20),b=r(536),y=r(537),g=r(13);function _(e){return t=>Object(n.format)(e,t)}class h extends a.Component{shouldComponentUpdate(e){return e.isRequesting!==this.props.isRequesting||e.primaryData.isRequesting!==this.props.primaryData.isRequesting||e.secondaryData.isRequesting!==this.props.secondaryData.isRequesting||!Object(c.isEqual)(e.query,this.props.query)}getItemChartData(){const{primaryData:e,selectedChart:t}=this.props;return e.data.intervals.map((function(e){const r={};return e.subtotals.segments.forEach((function(e){if(e.segment_label){const a=r[e.segment_label]?e.segment_label+" (#"+e.segment_id+")":e.segment_label;r[e.segment_id]={label:a,value:e.subtotals[t.key]||0}}})),{date:Object(n.format)("Y-m-d\\TH:i:s",e.date_start),...r}}))}getTimeChartData(){const{query:e,primaryData:t,secondaryData:r,selectedChart:a,defaultDateRange:s}=this.props,o=Object(p.getIntervalForQuery)(e,s),{primary:i,secondary:c}=Object(p.getCurrentDates)(e,s);return t.data.intervals.map((function(t,s){const l=Object(p.getPreviousDate)(t.date_start,i.after,c.after,e.compare,o),m=r.data.intervals[s];return{date:Object(n.format)("Y-m-d\\TH:i:s",t.date_start),primary:{label:`${i.label} (${i.range})`,labelDate:t.date_start,value:t.subtotals[a.key]||0},secondary:{label:`${c.label} (${c.range})`,labelDate:l.format("YYYY-MM-DD HH:mm:ss"),value:m&&m.subtotals[a.key]||0}}}))}getTimeChartTotals(){const{primaryData:e,secondaryData:t,selectedChart:r}=this.props;return{primary:Object(c.get)(e,["data","totals",r.key],null),secondary:Object(c.get)(t,["data","totals",r.key],null)}}renderChart(e,t,r,o){const{emptySearchResults:n,filterParam:i,interactiveLegend:c,itemsLabel:l,legendPosition:m,path:b,query:y,selectedChart:g,showHeaderControls:h,primaryData:f,defaultDateRange:O}=this.props,j=Object(p.getIntervalForQuery)(y,O),v=Object(p.getAllowedIntervalsForQuery)(y,O),R=Object(p.getDateFormatsForInterval)(j,f.data.intervals.length,{type:"php"}),w=n?Object(s.__)("No data for the current search","woocommerce-admin"):Object(s.__)("No data for the selected date range","woocommerce-admin"),{formatAmount:q,getCurrencyConfig:T}=this.context;return Object(a.createElement)(d.Chart,{allowedIntervals:v,data:r,dateParser:"%Y-%m-%dT%H:%M:%S",emptyMessage:w,filterParam:i,interactiveLegend:c,interval:j,isRequesting:t,itemsLabel:l,legendPosition:m,legendTotals:o,mode:e,path:b,query:y,screenReaderFormat:_(R.screenReaderFormat),showHeaderControls:h,title:g.label,tooltipLabelFormat:_(R.tooltipLabelFormat),tooltipTitle:"time-comparison"===e&&g.label||null,tooltipValueFormat:Object(u.getTooltipValueFormat)(g.type,q),chartType:Object(p.getChartTypeForQuery)(y),valueType:g.type,xFormat:_(R.xFormat),x2Format:_(R.x2Format),currency:T()})}renderItemComparison(){const{isRequesting:e,primaryData:t}=this.props;if(t.isError)return Object(a.createElement)(y.a,null);const r=e||t.isRequesting,s=this.getItemChartData();return this.renderChart("item-comparison",r,s)}renderTimeComparison(){const{isRequesting:e,primaryData:t,secondaryData:r}=this.props;if(!t||t.isError||r.isError)return Object(a.createElement)(y.a,null);const s=e||t.isRequesting||r.isRequesting,o=this.getTimeChartData(),n=this.getTimeChartTotals();return this.renderChart("time-comparison",s,o,n)}render(){const{mode:e}=this.props;return"item-comparison"===e?this.renderItemComparison():this.renderTimeComparison()}}h.contextType=b.a,h.propTypes={filters:m.a.array,isRequesting:m.a.bool,itemsLabel:m.a.string,limitProperties:m.a.array,mode:m.a.string,path:m.a.string.isRequired,primaryData:m.a.object,query:m.a.object.isRequired,secondaryData:m.a.object,selectedChart:m.a.shape({key:m.a.string.isRequired,label:m.a.string.isRequired,order:m.a.oneOf(["asc","desc"]),orderby:m.a.string,type:m.a.oneOf(["average","number","currency"]).isRequired}).isRequired},h.defaultProps={isRequesting:!1,primaryData:{data:{intervals:[]},isError:!1,isRequesting:!1},secondaryData:{data:{intervals:[]},isError:!1,isRequesting:!1}};t.a=Object(o.compose)(Object(i.withSelect)((e,t)=>{const{charts:r,endpoint:a,filters:s,isRequesting:o,limitProperties:n,query:i,advancedFilters:l}=t,m=n||[a],d=function e(t,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||0===t.length)return null;const s=t.slice(0),o=s.pop();if(o.showFilters(r,a)){const e=Object(g.flattenFilters)(o.filters),t=r[o.param]||o.defaultValue||"all";return Object(c.find)(e,{value:t})}return e(s,r,a)}(s,i),p=Object(c.get)(d,["settings","param"]),b=t.mode||function(e,t){if(e&&t){const r=Object(c.get)(e,["settings","param"]);if(!r||Object.keys(t).includes(r))return Object(c.get)(e,["chartMode"])}return null}(d,i)||"time-comparison",{woocommerce_default_date_range:y}=e(u.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings"),_=e(u.REPORTS_STORE_NAME),h={mode:b,filterParam:p,defaultDateRange:y};if(o)return h;const f=m.some(e=>i[e]&&i[e].length);if(i.search&&!f)return{...h,emptySearchResults:!0};const O=r&&r.map(e=>e.key),j=Object(u.getReportChartData)({endpoint:a,dataType:"primary",query:i,selector:_,limitBy:m,filters:s,advancedFilters:l,defaultDateRange:y,fields:O});if("item-comparison"===b)return{...h,primaryData:j};const v=Object(u.getReportChartData)({endpoint:a,dataType:"secondary",query:i,selector:_,limitBy:m,filters:s,advancedFilters:l,defaultDateRange:y,fields:O});return{...h,primaryData:j,secondaryData:v}}))(h)},542:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(5);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=Object(a.find)(t,{key:e});return r||t[0]}},543:function(e,t,r){"use strict";var a=r(0),s=r(2),o=r(14),n=r(8),i=r(1),c=r.n(i),l=r(13),m=r(22),d=r(136),u=r(12),p=r(20),b=r(17),y=r(537),g=r(536);class _ extends a.Component{formatVal(e,t){const{formatAmount:r,getCurrencyConfig:a}=this.context;return"currency"===t?r(e):Object(d.formatValue)(a(),t,e)}getValues(e,t){const{emptySearchResults:r,summaryData:a}=this.props,{totals:s}=a,o=s.primary?s.primary[e]:0,n=s.secondary?s.secondary[e]:0,i=r?0:o,c=r?0:n;return{delta:Object(d.calculateDelta)(i,c),prevValue:this.formatVal(c,t),value:this.formatVal(i,t)}}render(){const{charts:e,query:t,selectedChart:r,summaryData:o,endpoint:n,report:i,defaultDateRange:c}=this.props,{isError:d,isRequesting:u}=o;if(d)return Object(a.createElement)(y.a,null);if(u)return Object(a.createElement)(m.SummaryListPlaceholder,{numberOfItems:e.length});const{compare:g}=Object(p.getDateParamsFromQuery)(t,c);return Object(a.createElement)(m.SummaryList,null,t=>{let{onToggle:o}=t;return e.map(e=>{const{key:t,order:c,orderby:d,label:u,type:p,isReverseTrend:y,labelTooltipText:_}=e,h={chart:t};d&&(h.orderby=d),c&&(h.order=c);const f=Object(l.getNewPath)(h),O=r.key===t,{delta:j,prevValue:v,value:R}=this.getValues(t,p);return Object(a.createElement)(m.SummaryNumber,{key:t,delta:j,href:f,label:u,reverseTrend:y,prevLabel:"previous_period"===g?Object(s.__)("Previous period:","woocommerce-admin"):Object(s.__)("Previous year:","woocommerce-admin"),prevValue:v,selected:O,value:R,labelTooltipText:_,onLinkClickCallback:()=>{o&&o(),Object(b.recordEvent)("analytics_chart_tab_click",{report:i||n,key:t})}})})})}}_.propTypes={charts:c.a.array.isRequired,endpoint:c.a.string.isRequired,limitProperties:c.a.array,query:c.a.object.isRequired,selectedChart:c.a.shape({key:c.a.string.isRequired,label:c.a.string.isRequired,order:c.a.oneOf(["asc","desc"]),orderby:c.a.string,type:c.a.oneOf(["average","number","currency"]).isRequired}).isRequired,summaryData:c.a.object,report:c.a.string},_.defaultProps={summaryData:{totals:{primary:{},secondary:{}},isError:!1}},_.contextType=g.a,t.a=Object(o.compose)(Object(n.withSelect)((e,t)=>{const{charts:r,endpoint:a,limitProperties:s,query:o,filters:n,advancedFilters:i}=t,c=s||[a],l=c.some(e=>o[e]&&o[e].length);if(o.search&&!l)return{emptySearchResults:!0};const m=r&&r.map(e=>e.key),{woocommerce_default_date_range:d}=e(u.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings");return{summaryData:Object(u.getSummaryNumbers)({endpoint:a,query:o,select:e,limitBy:c,filters:n,advancedFilters:i,defaultDateRange:d,fields:m}),defaultDateRange:d}}))(_)},562:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return c}));var a=r(2),s=r(27);const o=Object(s.applyFilters)("woocommerce_admin_revenue_report_charts",[{key:"gross_sales",label:Object(a.__)("Gross sales","woocommerce-admin"),order:"desc",orderby:"gross_sales",type:"currency",isReverseTrend:!1},{key:"refunds",label:Object(a.__)("Returns","woocommerce-admin"),order:"desc",orderby:"refunds",type:"currency",isReverseTrend:!0},{key:"coupons",label:Object(a.__)("Coupons","woocommerce-admin"),order:"desc",orderby:"coupons",type:"currency",isReverseTrend:!1},{key:"net_revenue",label:Object(a.__)("Net sales","woocommerce-admin"),orderby:"net_revenue",type:"currency",isReverseTrend:!1,labelTooltipText:Object(a.__)("Full refunds are not deducted from tax or net sales totals","woocommerce-admin")},{key:"taxes",label:Object(a.__)("Taxes","woocommerce-admin"),order:"desc",orderby:"taxes",type:"currency",isReverseTrend:!1,labelTooltipText:Object(a.__)("Full refunds are not deducted from tax or net sales totals","woocommerce-admin")},{key:"shipping",label:Object(a.__)("Shipping","woocommerce-admin"),orderby:"shipping",type:"currency",isReverseTrend:!1},{key:"total_sales",label:Object(a.__)("Total sales","woocommerce-admin"),order:"desc",orderby:"total_sales",type:"currency",isReverseTrend:!1}]),n=Object(s.applyFilters)("woocommerce_admin_revenue_report_advanced_filters",{filters:{},title:Object(a._x)("Revenue Matches {{select /}} Filters","A sentence describing filters for Revenue. See screen shot for context: https://cloudup.com/cSsUY9VeCVJ","woocommerce-admin")}),i=[];Object.keys(n.filters).length&&(i.push({label:Object(a.__)("All Revenue","woocommerce-admin"),value:"all"}),i.push({label:Object(a.__)("Advanced Filters","woocommerce-admin"),value:"advanced"}));const c=Object(s.applyFilters)("woocommerce_admin_revenue_report_filters",[{label:Object(a.__)("Show","woocommerce-admin"),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:()=>i.length>0,filters:i}])}}]);